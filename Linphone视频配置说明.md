# Linphone 视频通话配置指南

## 📹 问题：Linphone视频无法打开

### 原因分析
Linphone可能默认禁用了视频功能或者视频编解码器配置不当。

---

## 🔧 配置步骤

### 步骤1：启用视频功能

1. **打开Linphone设置**
   - 点击左侧的齿轮图标（设置）

2. **找到"视频"或"Video"选项卡**

3. **启用以下选项**：
   - ✅ **启用视频** (Enable video)
   - ✅ **自动接受视频** (Automatically accept video)
   - ✅ **自动发起视频** (Automatically initiate video)

---

### 步骤2：配置视频编解码器

1. **在设置中找到"编解码器"或"Codecs"**

2. **视频编解码器优先级**：
   启用以下编解码器（按优先级排序）：
   - ✅ **VP8** （推荐，优先级最高）
   - ✅ **H264** （如果可用）
   - ✅ **H263** （兼容性好）
   - ⚠️ **JPEG** （我们的客户端使用，但Linphone可能不支持）

3. **调整优先级**：
   - VP8 → 优先级 1
   - H264 → 优先级 2
   - H263 → 优先级 3

---

### 步骤3：选择摄像头设备

1. **在"视频"设置中找到"摄像头设备"**

2. **选择您的摄像头**：
   - 集成摄像头（Integrated Camera）
   - USB摄像头
   - 虚拟摄像头

3. **测试摄像头**：
   - 点击"预览"或"Preview"按钮
   - 应该能看到摄像头画面

---

### 步骤4：配置视频参数

**推荐设置**：
```
视频尺寸：640x480 (VGA) 或 320x240 (QVGA)
帧率：15 fps 或 30 fps
比特率：512 kbps（中等质量）
```

---

## 🎯 测试方案

### 方案A：纯音频测试（推荐先测试）

如果Linphone视频有问题，先测试音频通话：

1. **从我们的客户端发起**：
   - 登录：alice / 123456
   - 选择联系人：charlie
   - 点击：**语音通话**（不是视频）

2. **Linphone接听**：
   - 只接听音频
   - 验证双向音频是否正常

### 方案B：Linphone使用H264编解码器

由于我们的客户端使用JPEG（较简单的实现），而Linphone通常支持VP8/H264：

**临时解决方案**：
- 先验证SIP信令是否正常（能否正常呼叫）
- 音频是否正常工作
- 视频编解码器不匹配时可能只有音频

---

## 🔍 常见问题

### Q1：Linphone显示"视频不可用"
**解决**：
- 检查摄像头权限（Windows隐私设置）
- 确认摄像头没有被其他应用占用
- 重启Linphone

### Q2：能呼叫但没有视频画面
**解决**：
- 检查编解码器是否匹配
- 查看Linphone日志（帮助 → 日志）
- 尝试降低视频质量

### Q3：视频非常卡顿
**解决**：
- 降低视频尺寸到320x240
- 降低帧率到15 fps
- 检查网络带宽

---

## 💡 关于编解码器兼容性

### 我们的客户端支持：
- ✅ **音频**：G.711 μ-law (PCMU) - 标准支持
- ⚠️ **视频**：JPEG over RTP (Payload Type 26) - 简单实现

### Linphone通常支持：
- ✅ **音频**：PCMU, PCMA, Opus, G.729
- ✅ **视频**：VP8, H264, H263

### 兼容性说明：
- **音频**：完全兼容 ✅
- **视频**：需要测试，可能不兼容 ⚠️

如果视频不兼容，这是**正常现象**，因为：
1. 我们的实现是用于课程演示
2. JPEG编解码器较少被商业软件支持
3. 但我们的客户端之间互相通话视频是正常的

---

## ✅ 推荐测试流程

### 1. Alice ↔ Bob（我们的客户端之间）
- ✅ 音频通话
- ✅ 视频通话（摄像头）
- ✅ 视频通话（屏幕共享）
- ✅ 视频源切换

### 2. Alice ↔ Linphone（互操作性）
- ✅ 音频通话（应该正常）
- ⚠️ 视频通话（可能只有音频）

---

## 📊 验收标准

### 核心功能（必须通过）：
- ✅ SIP注册成功
- ✅ 呼叫建立和挂断
- ✅ 双向音频通话
- ✅ 我们客户端之间的视频通话

### 扩展功能（加分项）：
- ✅ 与Linphone互通（至少音频）
- ⚠️ 与Linphone视频互通（编解码器限制）

---

**先测试我们客户端之间的音视频（Alice ↔ Bob），这是主要功能！**

