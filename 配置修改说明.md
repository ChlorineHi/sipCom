# å®¢æˆ·ç«¯é…ç½®ä¿®æ”¹è¯´æ˜

## å½“å‰é…ç½®çŠ¶æ€

### ClientConfig.java å½“å‰é…ç½®ï¼š
```java
// HTTP æœåŠ¡å™¨é…ç½®
public static final String SERVER_HOST = "localhost";  // âš ï¸ éœ€è¦ä¿®æ”¹
public static final int SERVER_PORT = 8080;

// Kamailio SIP æœåŠ¡å™¨é…ç½®
public static final String KAMAILIO_HOST = "10.129.161.35";  // âœ… å·²æ­£ç¡®é…ç½®
public static final int KAMAILIO_PORT = 5060;
```

## éƒ¨ç½²æ–¹æ¡ˆé€‰æ‹©

### ğŸ“Œ æ–¹æ¡ˆä¸€ï¼šå¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰- åœ¨å®¢æˆ·ç«¯ç”µè„‘ç›´æ¥è¿è¡Œå‘½ä»¤

**é€‚ç”¨åœºæ™¯**: ä¸´æ—¶æµ‹è¯•ã€å¿«é€Ÿéƒ¨ç½²

**æ­¥éª¤**ï¼š

1. å°†æ‰“åŒ…å¥½çš„ `sip-client-1.0.0.jar` å¤åˆ¶åˆ°å®¢æˆ·ç«¯ç”µè„‘

2. åœ¨å®¢æˆ·ç«¯ç”µè„‘ä¸Šè¿è¡Œï¼ˆæŒ‡å®šæœåŠ¡å™¨åœ°å€ï¼‰ï¼š
```bash
java -Dserver.host=10.129.161.35 -jar sip-client-1.0.0.jar
```

**ä¼˜ç‚¹**: 
- âœ… ä¸éœ€è¦ä¿®æ”¹ä»£ç 
- âœ… ä¸éœ€è¦é‡æ–°ç¼–è¯‘
- âœ… å¯ä»¥çµæ´»åˆ‡æ¢æœåŠ¡å™¨åœ°å€

**ç¼ºç‚¹**: 
- âš ï¸ éœ€è¦åœ¨ä»£ç ä¸­æ”¯æŒç³»ç»Ÿå±æ€§è¯»å–ï¼ˆéœ€è¦æ·»åŠ ä»£ç ï¼‰

---

### ğŸ“Œ æ–¹æ¡ˆäºŒï¼šä¿®æ”¹é…ç½®æ–‡ä»¶åé‡æ–°æ‰“åŒ…ï¼ˆæœ€ç¨³å®šï¼‰

**é€‚ç”¨åœºæ™¯**: æ­£å¼éƒ¨ç½²ã€é•¿æœŸä½¿ç”¨

**æ­¥éª¤**ï¼š

#### 1. ä¿®æ”¹é…ç½®æ–‡ä»¶

ç¼–è¾‘ `sip-client/src/main/java/com/sipex/client/config/ClientConfig.java`ï¼š

```java
// ä¿®æ”¹å‰ï¼š
public static final String SERVER_HOST = "localhost";

// ä¿®æ”¹åï¼š
public static final String SERVER_HOST = "10.129.161.35";
```

#### 2. é‡æ–°æ‰“åŒ…

```bash
# åœ¨æœåŠ¡å™¨ç”µè„‘ä¸Šæ‰§è¡Œ
cd E:\sipEx
mvn clean package -DskipTests
```

#### 3. å¤åˆ¶åˆ°å®¢æˆ·ç«¯ç”µè„‘

å°†ä»¥ä¸‹æ–‡ä»¶å¤åˆ¶åˆ°å®¢æˆ·ç«¯ç”µè„‘ï¼š
- `sip-client/target/sip-client-1.0.0.jar`

#### 4. åœ¨å®¢æˆ·ç«¯ç”µè„‘è¿è¡Œ

```bash
java -jar sip-client-1.0.0.jar
```

**ä¼˜ç‚¹**: 
- âœ… é…ç½®å›ºå®šï¼Œä¸ä¼šå‡ºé”™
- âœ… ç”¨æˆ·ä½¿ç”¨ç®€å•

**ç¼ºç‚¹**: 
- âš ï¸ åˆ‡æ¢æœåŠ¡å™¨éœ€è¦é‡æ–°ç¼–è¯‘

---

### ğŸ“Œ æ–¹æ¡ˆä¸‰ï¼šå¤åˆ¶æ•´ä¸ªé¡¹ç›®åˆ°å®¢æˆ·ç«¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

**é€‚ç”¨åœºæ™¯**: éœ€è¦åœ¨å®¢æˆ·ç«¯ç”µè„‘ä¸Šå¼€å‘æˆ–è°ƒè¯•

**æ­¥éª¤**ï¼š

#### 1. å¤åˆ¶é¡¹ç›®æ–‡ä»¶

å¤åˆ¶ä»¥ä¸‹ç›®å½•åˆ°å®¢æˆ·ç«¯ç”µè„‘ï¼š
```
E:\sipEx\
â”œâ”€â”€ sip-client\      # å®¢æˆ·ç«¯æ¨¡å—ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ sip-common\      # å…¬å…±æ¨¡å—ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ pom.xml          # çˆ¶ POMï¼ˆå¿…éœ€ï¼‰
â””â”€â”€ .gitignore       # å¯é€‰
```

**æ³¨æ„**: ä¸éœ€è¦å¤åˆ¶ `sip-server` ç›®å½•ï¼

#### 2. ä¿®æ”¹é…ç½®

åœ¨å®¢æˆ·ç«¯ç”µè„‘ä¸Šï¼Œç¼–è¾‘ `sip-client/src/main/java/com/sipex/client/config/ClientConfig.java`

```java
public static final String SERVER_HOST = "10.129.161.35";
```

#### 3. å®‰è£… Maven å’Œ JDK

ç¡®ä¿å®¢æˆ·ç«¯ç”µè„‘å·²å®‰è£…ï¼š
- JDK 8 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬

#### 4. ç¼–è¯‘å¹¶è¿è¡Œ

```bash
cd sipEx
mvn clean package -DskipTests
cd sip-client
java -jar target\sip-client-1.0.0.jar
```

---

## é…ç½®é¡¹è¯¦ç»†è¯´æ˜

### ClientConfig.java å®Œæ•´é…ç½®

```java
package com.sipex.client.config;

public class ClientConfig {
    // ========== HTTP/WebSocket æœåŠ¡å™¨é…ç½® ==========
    // ç”¨äºï¼šç”¨æˆ·è®¤è¯ã€æ¶ˆæ¯ä¼ é€’ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
    public static final String SERVER_HOST = "10.129.161.35";  // ä¿®æ”¹è¿™é‡Œï¼
    public static final int SERVER_PORT = 8080;
    public static final String SERVER_URL = "http://" + SERVER_HOST + ":" + SERVER_PORT;
    public static final String WS_URL = "ws://" + SERVER_HOST + ":" + SERVER_PORT + "/ws";

    // ========== Kamailio SIP æœåŠ¡å™¨é…ç½® ==========
    // ç”¨äºï¼šSIP æ³¨å†Œã€é€šè¯å»ºç«‹
    public static final String KAMAILIO_HOST = "10.129.161.35";  // å·²æ­£ç¡®
    public static final int KAMAILIO_PORT = 5060;
    public static final String SIP_DOMAIN = KAMAILIO_HOST;

    // ========== æœ¬åœ°å®¢æˆ·ç«¯é…ç½® ==========
    // è‡ªåŠ¨è·å–ï¼Œé€šå¸¸ä¸éœ€è¦ä¿®æ”¹
    public static String LOCAL_IP = getLocalIP();
    public static final int LOCAL_SIP_PORT = 5070;
    
    private static String getLocalIP() {
        try {
            return java.net.InetAddress.getLocalHost().getHostAddress();
        } catch (Exception e) {
            return "127.0.0.1";
        }
    }

    // ========== RTP åª’ä½“æµé…ç½® ==========
    // ç”¨äºï¼šéŸ³è§†é¢‘ä¼ è¾“
    public static final int RTP_PORT_START = 10000;
    public static final int RTP_PORT_END = 20000;
}
```

---

## å¿«é€Ÿä¿®æ”¹å·¥å…·

### Windows æ‰¹å¤„ç†è„šæœ¬

åˆ›å»º `update-server-ip.bat`ï¼ˆæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼š

```batch
@echo off
set SERVER_IP=10.129.161.35

echo æ­£åœ¨æ›´æ–°æœåŠ¡å™¨åœ°å€ä¸º: %SERVER_IP%

powershell -Command "(gc sip-client\src\main\java\com\sipex\client\config\ClientConfig.java) -replace 'SERVER_HOST = \"localhost\"', 'SERVER_HOST = \"%SERVER_IP%\"' | Out-File -encoding UTF8 sip-client\src\main\java\com\sipex\client\config\ClientConfig.java"

echo æ›´æ–°å®Œæˆï¼
echo è¯·è¿è¡Œ: mvn clean package -DskipTests
pause
```

---

## ç½‘ç»œè¿é€šæ€§æµ‹è¯•

åœ¨å®¢æˆ·ç«¯ç”µè„‘ä¸Šæµ‹è¯•ï¼š

### 1. æµ‹è¯•ç½‘ç»œè¿é€šæ€§
```bash
ping 10.129.161.35
```

### 2. æµ‹è¯• HTTP ç«¯å£
```bash
curl http://10.129.161.35:8080
# æˆ–åœ¨æµè§ˆå™¨è®¿é—®: http://10.129.161.35:8080
```

### 3. æµ‹è¯• SIP ç«¯å£ï¼ˆå¯é€‰ï¼‰
```bash
# ä½¿ç”¨ telnet æˆ– PowerShell
Test-NetConnection -ComputerName 10.129.161.35 -Port 8080
Test-NetConnection -ComputerName 10.129.161.35 -Port 5060
```

---

## æ¨èæ“ä½œæµç¨‹

### ğŸ¯ æ¨èï¼šæ–¹æ¡ˆäºŒï¼ˆä¿®æ”¹é…ç½®åé‡æ–°æ‰“åŒ…ï¼‰

1. **åœ¨æœåŠ¡å™¨ç”µè„‘ä¸Š**ï¼ˆE:\sipExï¼‰ï¼š
   ```bash
   # 1. ä¿®æ”¹é…ç½®æ–‡ä»¶
   # ç¼–è¾‘ sip-client/src/main/java/com/sipex/client/config/ClientConfig.java
   # å°† SERVER_HOST æ”¹ä¸º "10.129.161.35"
   
   # 2. é‡æ–°æ‰“åŒ…
   mvn clean package -DskipTests
   
   # 3. å¤åˆ¶ jar åˆ° U ç›˜æˆ–å…±äº«æ–‡ä»¶å¤¹
   # æ–‡ä»¶ä½ç½®: sip-client\target\sip-client-1.0.0.jar
   ```

2. **åœ¨å®¢æˆ·ç«¯ç”µè„‘ä¸Š**ï¼š
   ```bash
   # 1. å°† jar æ–‡ä»¶å¤åˆ¶åˆ°ä»»æ„ç›®å½•
   # 2. è¿è¡Œ
   java -jar sip-client-1.0.0.jar
   ```

---

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ª HOST é…ç½®ï¼Ÿ

**A**: 
- `SERVER_HOST`: Spring Boot åç«¯æœåŠ¡å™¨åœ°å€ï¼ˆç”¨äº HTTP/WebSocketï¼‰
- `KAMAILIO_HOST`: Kamailio SIP æœåŠ¡å™¨åœ°å€ï¼ˆç”¨äº SIP ä¿¡ä»¤ï¼‰

åœ¨ä½ çš„é…ç½®ä¸­ï¼Œä¸¤è€…éƒ½æŒ‡å‘åŒä¸€å°æœåŠ¡å™¨ï¼ˆ10.129.161.35ï¼‰ï¼Œä½†ç«¯å£ä¸åŒã€‚

### Q2: å®¢æˆ·ç«¯ç”µè„‘éœ€è¦å®‰è£… MySQL å—ï¼Ÿ

**A**: ä¸éœ€è¦ï¼MySQL åªåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼Œå®¢æˆ·ç«¯é€šè¿‡ HTTP API è®¿é—®æ•°æ®ã€‚

### Q3: å®¢æˆ·ç«¯ç”µè„‘éœ€è¦å®‰è£… Kamailio å—ï¼Ÿ

**A**: ä¸éœ€è¦ï¼Kamailio åªåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼Œå®¢æˆ·ç«¯ä½œä¸º SIP UAï¼ˆç”¨æˆ·ä»£ç†ï¼‰è¿æ¥åˆ° Kamailioã€‚

### Q4: å¯ä»¥åœ¨å¤–ç½‘è®¿é—®å—ï¼Ÿ

**A**: 
- å±€åŸŸç½‘å†…ï¼šç›´æ¥ä½¿ç”¨å†…ç½‘ IPï¼ˆ10.129.161.35ï¼‰
- å¤–ç½‘è®¿é—®ï¼šéœ€è¦é…ç½®ç«¯å£è½¬å‘æˆ–ä½¿ç”¨å…¬ç½‘ IP/åŸŸå

### Q5: å¤šä¸ªå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªè´¦å·å—ï¼Ÿ

**A**: å»ºè®®æ¯ä¸ªå®¢æˆ·ç«¯ä½¿ç”¨ä¸åŒè´¦å·ï¼ˆalice, bob, charlie ç­‰ï¼‰ï¼Œé¿å…å†²çªã€‚

---

## ä¸‹ä¸€æ­¥

ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œè¯·å‚è€ƒï¼š
- `å®¢æˆ·ç«¯éƒ¨ç½²æŒ‡å—.md` - è¯¦ç»†éƒ¨ç½²æ­¥éª¤
- `å¯åŠ¨æŒ‡å—.md` - æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å¯åŠ¨æµç¨‹
- `é—®é¢˜æ’æŸ¥ä¸è§£å†³æ–¹æ¡ˆ.md` - é‡åˆ°é—®é¢˜æ—¶çš„æ’æŸ¥æ–¹æ³•

